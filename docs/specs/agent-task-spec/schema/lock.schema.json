{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://jadecli.dev/schemas/ats/v0.1.0/lock.schema.json",
  "title": "ATS Lock",
  "description": "Validates lock files used for agent task claiming in the Agent Task Spec (ATS) v0.1.0 system.",
  "type": "object",
  "required": ["taskId", "agent", "lockedAt"],
  "additionalProperties": false,
  "properties": {
    "taskId": {
      "type": "string",
      "description": "ID of the task being locked."
    },
    "agent": {
      "type": "string",
      "description": "Name of the agent holding the lock."
    },
    "lockedAt": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when the lock was acquired."
    },
    "staleSec": {
      "type": "integer",
      "minimum": 60,
      "description": "Seconds before this lock is considered stale."
    },
    "commitSha": {
      "type": "string",
      "pattern": "^[0-9a-f]{7,40}$",
      "description": "Git commit SHA at the time of locking."
    }
  }
}
